<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="RWW">
<meta name="dcterms.date" content="2022-03-18">

<title>rww.science-blog - National Weather Service Portland, Part II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">rww.science-blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">National Weather Service Portland, Part II</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">ggplot</div>
                <div class="quarto-category">tidyverse</div>
                <div class="quarto-category">time series</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>RWW </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 18, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="loading-nws-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-nws-data">Loading NWS Data</h2>
<p>I first will try to load it without any intervention to see what it looks like. As we will see, it is quite messy in a few easy ways and a few that are a bit more tricky.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>NWS <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">url</span>(<span class="st">"https://www.weather.gov/source/pqr/climate/webdata/Portland_dailyclimatedata.csv"</span>))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(NWS, <span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"100%"</span>, <span class="at">height =</span> <span class="st">"500px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; "><table class="table" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> Daily.Temperature.and.Precipitation.Data </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.1 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.2 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.3 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.4 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.5 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.6 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.7 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.8 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.9 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.10 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.11 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.12 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.13 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.14 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.15 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.16 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.17 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.18 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.19 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.20 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.21 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.22 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.23 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.24 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.25 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.26 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.27 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.28 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.29 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.30 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.31 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.32 </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> X.33 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Portland, Oregon Airport </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Data Starts: </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 13 Oct 1940 </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> END Year: </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 2019 </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> TX is Maximum Temperature (deg F), TX is Minimum Temperature (deg F), PR is Precipitation (inches), SN is Snowfall  (inches) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> Example:   High Temperature  23 October 1940 is 58 while low was 53 deg. </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;"> YR </td>
   <td style="text-align:left;"> MO </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 1 </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 3 </td>
   <td style="text-align:left;"> 4 </td>
   <td style="text-align:left;"> 5 </td>
   <td style="text-align:left;"> 6 </td>
   <td style="text-align:left;"> 7 </td>
   <td style="text-align:left;"> 8 </td>
   <td style="text-align:left;"> 9 </td>
   <td style="text-align:left;"> 10 </td>
   <td style="text-align:left;"> 11 </td>
   <td style="text-align:left;"> 12 </td>
   <td style="text-align:left;"> 13 </td>
   <td style="text-align:left;"> 14 </td>
   <td style="text-align:left;"> 15 </td>
   <td style="text-align:left;"> 16 </td>
   <td style="text-align:left;"> 17 </td>
   <td style="text-align:left;"> 18 </td>
   <td style="text-align:left;"> 19 </td>
   <td style="text-align:left;"> 20 </td>
   <td style="text-align:left;"> 21 </td>
   <td style="text-align:left;"> 22 </td>
   <td style="text-align:left;"> 23 </td>
   <td style="text-align:left;"> 24 </td>
   <td style="text-align:left;"> 25 </td>
   <td style="text-align:left;"> 26 </td>
   <td style="text-align:left;"> 27 </td>
   <td style="text-align:left;"> 28 </td>
   <td style="text-align:left;"> 29 </td>
   <td style="text-align:left;"> 30 </td>
   <td style="text-align:left;"> 31 </td>
   <td style="text-align:left;"> AVG or Total </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 1940 </td>
   <td style="text-align:left;"> 10 </td>
   <td style="text-align:left;"> TX </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> 75 </td>
   <td style="text-align:left;"> 70 </td>
   <td style="text-align:left;"> 64 </td>
   <td style="text-align:left;"> 72 </td>
   <td style="text-align:left;"> 72 </td>
   <td style="text-align:left;"> 78 </td>
   <td style="text-align:left;"> 78 </td>
   <td style="text-align:left;"> 64 </td>
   <td style="text-align:left;"> 63 </td>
   <td style="text-align:left;"> 61 </td>
   <td style="text-align:left;"> 58 </td>
   <td style="text-align:left;"> 57 </td>
   <td style="text-align:left;"> 57 </td>
   <td style="text-align:left;"> 57 </td>
   <td style="text-align:left;"> 56 </td>
   <td style="text-align:left;"> 53 </td>
   <td style="text-align:left;"> 59 </td>
   <td style="text-align:left;"> 59 </td>
   <td style="text-align:left;"> 52 </td>
   <td style="text-align:left;"> M </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 1940 </td>
   <td style="text-align:left;"> 10 </td>
   <td style="text-align:left;"> TN </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> 57 </td>
   <td style="text-align:left;"> 53 </td>
   <td style="text-align:left;"> 52 </td>
   <td style="text-align:left;"> 50 </td>
   <td style="text-align:left;"> 58 </td>
   <td style="text-align:left;"> 58 </td>
   <td style="text-align:left;"> 59 </td>
   <td style="text-align:left;"> 54 </td>
   <td style="text-align:left;"> 48 </td>
   <td style="text-align:left;"> 41 </td>
   <td style="text-align:left;"> 53 </td>
   <td style="text-align:left;"> 48 </td>
   <td style="text-align:left;"> 41 </td>
   <td style="text-align:left;"> 38 </td>
   <td style="text-align:left;"> 37 </td>
   <td style="text-align:left;"> 45 </td>
   <td style="text-align:left;"> 48 </td>
   <td style="text-align:left;"> 50 </td>
   <td style="text-align:left;"> 46 </td>
   <td style="text-align:left;"> M </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 1940 </td>
   <td style="text-align:left;"> 10 </td>
   <td style="text-align:left;"> PR </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> 0.01 </td>
   <td style="text-align:left;"> T </td>
   <td style="text-align:left;"> T </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0.13 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> T </td>
   <td style="text-align:left;"> 0.14 </td>
   <td style="text-align:left;"> 0.05 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0.63 </td>
   <td style="text-align:left;"> 1.03 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> T </td>
   <td style="text-align:left;"> 0.18 </td>
   <td style="text-align:left;"> 0.58 </td>
   <td style="text-align:left;"> 0.5 </td>
   <td style="text-align:left;"> 0.25 </td>
   <td style="text-align:left;"> M </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 1940 </td>
   <td style="text-align:left;"> 10 </td>
   <td style="text-align:left;"> SN </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> M </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>The column names are stored in the seventh row; to properly import this. In addition, there are two missing value codes: <code>M</code> and <code>-</code> that will have to be accounted for. I will use <code>skip</code> to skip the first 6 rows and declare two distinct values to be encoded as missing. Let’s see what we get.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>NWS <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">url</span>(<span class="st">"https://www.weather.gov/source/pqr/climate/webdata/Portland_dailyclimatedata.csv"</span>), <span class="at">skip=</span><span class="dv">6</span>, <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="st">"M"</span>,<span class="st">"-"</span>))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(NWS, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     YR MO  X   X1   X2   X3   X4   X5   X6   X7   X8   X9  X10  X11  X12  X13
1  1940 10 TX &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;   75
2  1940 10 TN &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;   57
3  1940 10 PR &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; 0.01
4  1940 10 SN &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;    0
5  1940 11 TX   52   53   47   55   51   58   56   50   48   47   46   45   45
6  1940 11 TN   40   38   36   32   42   46   46   42   35   34   35   33   34
7  1940 11 PR 0.17 0.02    T    0 0.07 0.28 0.85 0.29 0.02 0.01 0.01    0    0
8  1940 11 SN    0    0    0    0    0    0    0    0    0    0    0    0    0
9  1940 12 TX   51   53   52   51   56   54   50   51   48   50   46   45   43
10 1940 12 TN   42   40   42   42   44   37   34   35   32   26   34   28   27
   X14 X15 X16  X17  X18 X19  X20  X21 X22  X23  X24 X25 X26  X27  X28  X29 X30
1   70  64  72   72   78  78   64   63  61   58   57  57  57   56   53   59  59
2   53  52  50   58   58  59   54   48  41   53   48  41  38   37   45   48  50
3    T   T   0 0.13    0   T 0.14 0.05   0 0.63 1.03   0   0    T 0.18 0.58 0.5
4    0   0   0    0    0   0    0    0   0    0    0   0   0    0    0    0   0
5   47  53  49   46   49  46   49   50  44   42   44  51  44   45   59   57  45
6   33  28  27   36   30  29   36   33  28   37   35  37  36   38   43   40  39
7    0   0   0 0.29 0.01   0 0.37    T   0 0.12 0.62   0   0 0.51 0.89    T   T
8    0   0   0    0    0   0    0    0   0    0    0   0   0    0    0    0   0
9   40  39  39   41   41  45   46   62  60   56   53  54  45   50   51   43  44
10  25  29  33   35   34  35   41   39  39   42   42  42  40   38   36   35  37
    X31 AVG.or.Total
1    52         &lt;NA&gt;
2    46         &lt;NA&gt;
3  0.25         &lt;NA&gt;
4     0            0
5  &lt;NA&gt;         49.1
6  &lt;NA&gt;         35.9
7  &lt;NA&gt;         4.53
8  &lt;NA&gt;            0
9    45         48.5
10   32           36</code></pre>
</div>
</div>
<p>Two other things are of note. The first one is that R really doesn’t like columns to be named as numbers so we have an <code>X</code> in front of the numeric days. The second is that the column denoting which variable the rows represent is now <code>X</code>. Let me rename <code>X</code> to be <code>Variable</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>NWS <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">url</span>(<span class="st">"https://www.weather.gov/source/pqr/climate/webdata/Portland_dailyclimatedata.csv"</span>), <span class="at">skip=</span><span class="dv">6</span>, <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="st">"M"</span>,<span class="st">"-"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Variable =</span> X)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(NWS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   3808 obs. of  35 variables:
 $ YR          : int  1940 1940 1940 1940 1940 1940 1940 1940 1940 1940 ...
 $ MO          : int  10 10 10 10 11 11 11 11 12 12 ...
 $ Variable    : chr  "TX" "TN" "PR" "SN" ...
 $ X1          : chr  NA NA NA NA ...
 $ X2          : chr  NA NA NA NA ...
 $ X3          : chr  NA NA NA NA ...
 $ X4          : chr  NA NA NA NA ...
 $ X5          : chr  NA NA NA NA ...
 $ X6          : chr  NA NA NA NA ...
 $ X7          : chr  NA NA NA NA ...
 $ X8          : chr  NA NA NA NA ...
 $ X9          : chr  NA NA NA NA ...
 $ X10         : chr  NA NA NA NA ...
 $ X11         : chr  NA NA NA NA ...
 $ X12         : chr  NA NA NA NA ...
 $ X13         : chr  "75" "57" "0.01" "0" ...
 $ X14         : chr  "70" "53" "T" "0" ...
 $ X15         : chr  "64" "52" "T" "0" ...
 $ X16         : chr  "72" "50" "0" "0" ...
 $ X17         : chr  "72" "58" "0.13" "0" ...
 $ X18         : chr  "78" "58" "0" "0" ...
 $ X19         : chr  "78" "59" "T" "0" ...
 $ X20         : chr  "64" "54" "0.14" "0" ...
 $ X21         : chr  "63" "48" "0.05" "0" ...
 $ X22         : chr  "61" "41" "0" "0" ...
 $ X23         : chr  "58" "53" "0.63" "0" ...
 $ X24         : chr  "57" "48" "1.03" "0" ...
 $ X25         : chr  "57" "41" "0" "0" ...
 $ X26         : chr  "57" "38" "0" "0" ...
 $ X27         : chr  "56" "37" "T" "0" ...
 $ X28         : chr  "53" "45" "0.18" "0" ...
 $ X29         : chr  "59" "48" "0.58" "0" ...
 $ X30         : chr  "59" "50" "0.5" "0" ...
 $ X31         : chr  "52" "46" "0.25" "0" ...
 $ AVG.or.Total: chr  NA NA NA "0" ...</code></pre>
</div>
</div>
<p>It is disappointing that everything is stored as <code>character</code> type. That will prove advantageous in one respect because there is some <code>/A</code> garbage embedded in two of the variables (SN and PR). Here, I will ask R to find all columns that are stored as character and ask it to remove the string.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>NWS <span class="ot">&lt;-</span> NWS <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span><span class="fu">str_remove</span>(.x, <span class="st">"/A"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we will have to fix the values <code>T</code> in the precipitation and snow variables [which are currently stored in repeated rows]. Nevertheless, this should give me what I need to create the monthly data.</p>
<section id="daily-data" class="level3">
<h3 class="anchored" data-anchor-id="daily-data">Daily Data</h3>
<p>The daily data will necessarily not involve the column of Totals/Averages that we used for the monthly data so let us eliminate it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>NWS.Daily <span class="ot">&lt;-</span> NWS <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>AVG.or.Total)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now I want to rename the columns with names X1, X2, …, X31 to <code>Day.1</code> to <code>Day.31</code> for clarity. It is largely inconsequential, it would work on the X’s but I prefer nicely labeled intermediate steps.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(NWS.Daily) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"YR"</span>,<span class="st">"MO"</span>,<span class="st">"Variable"</span>,<span class="fu">paste0</span>(<span class="st">"Day."</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The next step is to tidy the data. First, let me use <code>pivot_longer</code> on every column that starts with <code>Day.</code> putting the variable names in <code>Day</code> and variable values in <code>value</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>NWS.Daily.Base <span class="ot">&lt;-</span> NWS.Daily <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(., <span class="at">cols=</span><span class="fu">starts_with</span>(<span class="st">"Day."</span>), <span class="at">names_to =</span> <span class="st">"Day"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(NWS.Daily.Base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
     YR    MO Variable Day   value
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;
1  1940    10 TX       Day.1 &lt;NA&gt; 
2  1940    10 TX       Day.2 &lt;NA&gt; 
3  1940    10 TX       Day.3 &lt;NA&gt; 
4  1940    10 TX       Day.4 &lt;NA&gt; 
5  1940    10 TX       Day.5 &lt;NA&gt; 
6  1940    10 TX       Day.6 &lt;NA&gt; </code></pre>
</div>
</div>
<p>Now I want to turn the days into numbers [they are character above] and then use <code>pivot_wider</code> to get the four variables into unique columns, recode trace [T] where they exist to numbers that are half the size of the smallest values, turn them into numbers, and create a date.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>NWS.Daily.Base <span class="sc">%&lt;&gt;%</span>  <span class="fu">mutate</span>(<span class="at">Day =</span> <span class="fu">str_remove</span>(Day, <span class="st">"Day."</span>)) <span class="sc">%&gt;%</span>  </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(., <span class="at">names_from =</span> <span class="st">"Variable"</span>, <span class="at">values_from =</span> <span class="st">"value"</span>) </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>NWS.Daily <span class="ot">&lt;-</span> NWS.Daily.Base <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">PR =</span> <span class="fu">recode</span>(PR, <span class="at">T =</span> <span class="st">"O.005"</span>), <span class="at">SN =</span> <span class="fu">recode</span>(SN, <span class="at">T =</span> <span class="st">"O.005"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TX =</span> <span class="fu">as.numeric</span>(TX), <span class="at">TN =</span> <span class="fu">as.numeric</span>(TN), <span class="at">PR =</span> <span class="fu">as.numeric</span>(PR), <span class="at">SN =</span> <span class="fu">as.numeric</span>(SN), </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">date =</span> <span class="fu">as.Date</span>(<span class="fu">paste</span>(MO,Day,YR,<span class="at">sep=</span><span class="st">"-"</span>), <span class="at">format=</span><span class="st">"%m-%d-%Y"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>NWS.Daily.Clean <span class="ot">&lt;-</span> NWS.Daily <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(date))</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(NWS.Daily.Clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
     YR    MO Day      TX    TN    PR    SN date      
  &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    
1  1940    10 1        NA    NA    NA    NA 1940-10-01
2  1940    10 2        NA    NA    NA    NA 1940-10-02
3  1940    10 3        NA    NA    NA    NA 1940-10-03
4  1940    10 4        NA    NA    NA    NA 1940-10-04
5  1940    10 5        NA    NA    NA    NA 1940-10-05
6  1940    10 6        NA    NA    NA    NA 1940-10-06</code></pre>
</div>
</div>
<p>This is exactly what I needed.</p>
</section>
</section>
<section id="some-plots" class="level1">
<h1>Some Plots</h1>
</section>
<section id="by-day" class="level1">
<h1>By Day?</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>NWS.Daily.Clean <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>PR) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.1</span>) <span class="sc">+</span> <span class="fu">theme_ipsum_rc</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Daily Precipitation"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This is really pretty terrible. This is going to need a good bit of work. My first go is going to be to create a moving average that can smooth out the look. I will use a 14-day moving average.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>NWS.Daily.Clean <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Rolling.Average =</span> zoo<span class="sc">::</span><span class="fu">rollmean</span>(PR, <span class="dv">7</span>, <span class="at">fill=</span><span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>PR)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.05</span>, <span class="at">size=</span><span class="fl">0.5</span>) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>Rolling.Average), <span class="at">inherit.aes=</span><span class="cn">FALSE</span>, <span class="at">color=</span><span class="st">"red"</span>) <span class="sc">+</span> <span class="fu">theme_ipsum_rc</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Daily Precipitation"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="time-series-plots" class="level2">
<h2 class="anchored" data-anchor-id="time-series-plots">Time Series Plots</h2>
<section id="daily" class="level3">
<h3 class="anchored" data-anchor-id="daily">Daily</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>NWS.Daily.Clean <span class="ot">&lt;-</span> NWS.Daily.Clean <span class="sc">%&gt;%</span> <span class="fu">as_tsibble</span>(., <span class="at">index=</span>date)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>NWS.Daily.Clean <span class="sc">%&gt;%</span> <span class="fu">filter</span>(date <span class="sc">&gt;</span> <span class="st">"2010-01-01"</span>) <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(TX) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Daily High Temperatures in Portland, Oregon"</span>, <span class="at">caption =</span> <span class="st">"Data from NWS"</span>, <span class="at">x =</span> <span class="st">"Date"</span>, <span class="at">y=</span><span class="st">"High Temperature (deg F)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="seasonal-plots" class="level2">
<h2 class="anchored" data-anchor-id="seasonal-plots">Seasonal Plots</h2>
<section id="daily-1" class="level3">
<h3 class="anchored" data-anchor-id="daily-1">Daily</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>NWS.Daily.Clean <span class="sc">%&gt;%</span> <span class="fu">filter</span>(date <span class="sc">&gt;</span> <span class="st">"2015-01-01"</span>) <span class="sc">%&gt;%</span> <span class="fu">gg_season</span>(TX, <span class="at">labels =</span> <span class="st">"both"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="subseries-plots" class="level2">
<h2 class="anchored" data-anchor-id="subseries-plots">Subseries Plots</h2>
<section id="daily-2" class="level3">
<h3 class="anchored" data-anchor-id="daily-2">Daily</h3>
<p>Daily subseries plots are a mess because there are 31 and I am not sure that there would be much instructive anyway as daily variation in temperature is quite noisy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>NWS.Daily.Clean <span class="sc">%&gt;%</span> <span class="fu">gg_subseries</span>(TX, <span class="at">period=</span><span class="st">"weeks"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="autocorrelation" class="level1">
<h1>Autocorrelation</h1>
<p>To what degree are observations separated by k time periods correlated.</p>
<p><span class="math display">\[r_{k} = \frac{\sum\limits_{t=k+1}^T (y_{t}-\bar{y})(y_{t-k}-\bar{y})}
{\sum\limits_{t=1}^T (y_{t}-\bar{y})^2}\]</span> where <span class="math inline">\(T\)</span> is the length of the time series. The autocorrelation coefficients make up the autocorrelation function or ACF.</p>
<p>The autocorrelation coefficients for the monthly high temperatures can be computed using the ACF() function.</p>
<section id="daily-acf" class="level3">
<h3 class="anchored" data-anchor-id="daily-acf">Daily: ACF</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>NWS.Daily.Clean <span class="sc">%&gt;%</span> <span class="fu">ACF</span>(TX) <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>